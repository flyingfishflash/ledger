<mat-card>
  <mat-card-content>
    <div>
      <img
        id="profile-img"
        src="/assets/images/project-icon.png"
        width="100"
        height="100"
      />
      <h2 class="mat-h2">Ledger</h2>
      <div *ngIf="!isLoginDisabled">
        <h3 class="mat-h3" style="margin: 0.8rem;">
          {{ appConfigInfoBuild.version }}
        </h3>
        <p class="mat-small" style="margin: 0.1rem;">
          {{ appConfigInfoBuild.time | date: "mediumDate":"UTC" }}
        </p>
        <p class="mat-small" style="margin: 0.1rem;">
          {{ appConfigInfoBuild.time | date: "longTime":"UTC" }}
        </p>
        <p class="mat-small" style="margin: 0.1rem;">
          <br />
          {{ appConfigInfoBuild.ciPlatform }} |
          {{ appConfigInfoBuild.ciPipelineId }} |
          {{ appConfigInfoBuild.commit }}
        </p>
      </div>
      <div><br /></div>

      <form
        *ngIf="!isLoggedIn"
        name="form"
        (ngSubmit)="f.form.valid && onSubmit()"
        #f="ngForm"
        novalidate
      >
        <mat-form-field>
          <input
            matInput
            type="text"
            placeholder="User Name"
            [(ngModel)]="form.username"
            name="username"
            required
            #username="ngModel"
            [disabled]="isLoginDisabled"
          />
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            type="password"
            [type]="hide ? 'password' : 'text'"
            placeholder="Password"
            name="password"
            [(ngModel)]="form.password"
            required
            #password="ngModel"
            [disabled]="isLoginDisabled"
          />
        </mat-form-field>
        <!--button class="show-hide-password-button" (click)="hide = !hide">
            <mat-icon matSuffix>{{ this.hide ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button-->
        <button
          style="margin-top: 32px;"
          mat-flat-button
          color="primary"
          [disabled]="isLoginDisabled"
        >
          Login
        </button>
        <div style="margin-top: 32px; height: 3em;">
          <div
            *ngIf="(f.submitted && isLoginFailed) || errorMessage"
            style="margin: 16px;"
          >
            <mat-error
              ><span>{{ errorMessage }}</span></mat-error
            >
          </div>
          <div *ngIf="f.submitted && username.invalid" style="margin: 16px;">
            <mat-error>Please provide a valid user name</mat-error>
          </div>
          <div *ngIf="f.submitted && password.invalid" style="margin: 16px;">
            <mat-error *ngIf="password.errors.required"
              >Please provide a valid password</mat-error
            >
          </div>
        </div>
      </form>
    </div>
  </mat-card-content>
</mat-card>
